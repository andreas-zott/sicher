<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Arbeitssicherheit-Checkliste-2025</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<link href="/sicher/favicon.ico" rel="icon" type="image/x-icon"/>
<link href="/sicher/manifest.json" rel="manifest"/>
<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

input[type="radio"] {
  appearance: none;
  -webkit-appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  border: 2px solid #999;
  background-color: #fff;
  cursor: pointer;
  margin: 4px;
  position: relative;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}
input[type="radio"][value="ja"]:checked {
  background-color: #A5D6A7;
  border-color: #A5D6A7;
}
input[type="radio"][value="nein"]:checked {
  background-color: #C62828;
  border-color: #C62828;
}
input[type="radio"][value="nicht_vorhanden"]:checked {
  background-color: #999;
  border-color: #999;
}
/* Kompakter Modus nur für PDF-Export */
.pdf-compact * {
    font-size: 10px !important;
    line-height: 1.15 !important;
}

.pdf-compact table td,
.pdf-compact table th {
    padding: 3px 4px !important;
    white-space: normal !important;
    word-break: break-word !important;
}

.pdf-compact .radio-wrap {
    font-size: 8px !important;
}

@media print {
  button,
  .btn,
  footer,
  .footer,
  .buttons,
  .custom-btn,
  .btn-medium,
  .btn-large {
    display: none !important;
  }
  #signature-pad,
  canvas,
  #auswertung-container {
    display: none !important;
  }
  @page {
    size: A4 portrait;
    margin: 15mm 12mm;
  }
  body {
    background: white !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    font-size: 9pt !important;
  }

  h1 { font-size: 14pt !important; }
  h2 { font-size: 12pt !important; }
  table { font-size: 8pt !important; }
  td, th {
    font-size: 8pt !important;
    padding: 4px 6px !important;
    line-height: 1.2 !important;
  }
  input[type="text"], input[type="date"] {
    font-size: 8pt !important;
  }
  
  /* Improved page break handling to prevent empty pages */
  .category-section {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  .category-header {
    page-break-before: auto !important; /* Changed from always to auto */
    break-before: auto !important;
    page-break-after: avoid !important;
    break-after: avoid !important;
  }

  .category-header:first-of-type {
    page-break-before: auto !important;
    break-before: auto !important;
  }

  .massnahmen-section {
    page-break-before: auto !important; /* Changed from always to auto */
    break-before: auto !important;
    margin-top: 20px !important;
  }
  
  /* Prevent empty rows from creating new pages */
  .massnahmen-section table tr:empty,
  .massnahmen-section table tr td:empty {
    display: none !important;
  }
  
  /* Hide empty measures table if no content */
  .massnahmen-section tbody:empty {display:none !important;}
    display: none !important;
  }

  tr, td, th {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  .category-header + tr {
    page-break-before: avoid !important;
    break-before: avoid !important;
  }

  #maßnahmen-tabelle tr {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }
  
  /* Better handling of empty table rows */
  #maßnahmen-tabelle tr.empty-row {
    display: none !important;
  }

  .confirmation-section {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    page-break-before: auto !important; /* Changed from always */
    margin-top: 20px !important;
  }

  .signature-container {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }
  
  /* Prevent orphaned content at page end */
  .page-break-before {
    page-break-before: auto !important;
    break-before: auto !important;
  }
}

#signature-pad {
  border: 2px solid #cccccc;
  border-radius: 12px;
  width: 100%;
  max-width: 600px;
  height: 150px;
  touch-action: none;
}
.buttons {
  margin-top: 10px;
}
#content {
  max-width: 600px;
  margin: auto;
  font-family: 'Inter', Arial, sans-serif;
}
button {
  background-color: #B71C1C;
  color: white;
  background-color: #B71C1C;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 10px 16px;
  cursor: pointer;
  font-size: 12px;
  margin-right: 10px;
}
button:hover {
  background-color: #D32F2F;
  background-color: #8B0000;
}
.confirmation-section {
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 24px;
  max-width: 700px;
  margin: 40px auto;
}
.checkbox-row {
  display: flex;
  gap: 40px;
  margin-top: 16px;
  justify-content: space-between;
}
.checkbox-column {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
}
label {
  display: flex;
  align-items: center;
  gap: 8px;
}
button.custom-btn,
button.btn-large,
button.btn-medium {
font-size: 16px;
padding: 10px 20px;
border-radius: 8px;
border: none;
cursor: pointer;
margin: 10px auto;
display: block;
font-family: inherit;
}
button.btn-large {
width: 600px;
}
button.btn-medium {
width: 280px;
}
button.btn-blue {
background-color: #B71C1C;
color: white;
}
button.btn-green {
background-color: #388e3c;
color: white;
}
button.btn-gray {
background-color: #6b6b6b;
color: white;
}
#signature-image {
max-width: 600px;
border: 1px solid #ccc;
border-radius: 8px;
display: block;
min-height: 150px;
margin: 10px auto;
}
.page-break-before {
  page-break-before: always;
  margin-top: 0;
  break-before: page;
}
body {
  font-family: 'Inter', Arial, sans-serif;
  background-color: #f4f4f4;
  padding: 20px;
}
header h1 {
  color: #212529;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
  background-color: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
th {
  background-color: #B71C1C;
  color: white;
  padding: 12px;
  text-align: center;
}
td {
  padding: 10px;
  border: 1px solid #dee2e6;
  text-align: left;
  line-height: 1.35;
}
tr:nth-child(even) {
  background-color: #f2f2f2;
}
tr:hover {
  background-color: #fdecea;
}
.category-header {
  background-color: #f5e9e9 !important;
  color: #5b2121;
  font-weight: bold;
  text-align: left;
  padding: 12px;
}
input[type="text"], input[type="date"] {
  width: 100%;
  max-width: 300px;
  padding: 8px;
  font-size: 16px;
  margin-top: 5px;
  box-sizing: border-box;
  border: 1px solid #ced4da;
  border-radius: 4px;
}
.highlight-ja td:first-child {
  background-color: #d4edda !important;
}
.highlight-nein td:first-child {
  background-color: #f8d7da !important;
}
.highlight-nicht td:first-child {
  background-color: #e2e3e5 !important;
}

/* Radio-Buttons vertikal mit Text darunter */
.radio-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 10px;
    line-height: 1.1;
}
.radio-wrap input[type="radio"] {
    margin-bottom: 2px;
}


/* Improved print readability */
@media print {
  body, table, td, th {
    font-size: 7pt !important;
    line-height: 1.15 !important;
  }
  td, th {
    white-space: normal !important;
    word-break: break-word !important;
    hyphens: auto !important;
  }
}

</style>
</head>
<body>
<div class="print-wrapper">
<header>
<div style="display: flex; justify-content: space-between; align-items: center;">
<h1 id="titel" style="margin: 0;"></h1>
<span id="datum" style="padding: 8px; font-size: 16px; font-weight: bold;"></span>
</div>
</header>
<div class="form-section" style="max-width: 300px;">
<div style="margin-bottom: 10px;">
<label for="markt">Marktnummer:</label>
<input id="markt" placeholder="z. B. M123" required="" type="text"/>
</div>
<div style="margin-bottom: 10px;">
<label for="name">Name:</label><br/>
<input id="name" style="width: 100%;" type="text"/>
</div>
<div style="margin-bottom: 10px;">
<label for="sifa">SiFa:</label><br/>
<input id="sifa" style="width: 100%;" type="text"/>
</div>
</div>
<div style="text-align: center; margin: 40px 0; font-size: 20px;">
<strong>Teil der Gefährdungsbeurteilung / Wirksamkeitskontrolle</strong><br/>
Wenn eine Frage mit „nein" beantwortet wurde, besteht Handlungsbedarf.
</div>
<table id="fragenTabelle">
<thead>
<tr>
<th>Frage</th>
<th>Ja</th>
<th>Nein</th>
<th>n.v.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="category-header" colspan="4">1.0 Gesamtmarkt</td>
</tr>
<tr>
<td style="text-align: left;">Tragen alle Personen im Markt festes, geschlossenes und flaches Schuhwerk entsprechend den Vorgaben?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Beachten die Mitarbeitenden die Betriebsanweisung für das Flurförderfahrzeug, insbesondere hinsichtlich der vorgeschriebenen Persönlichen Schutzausrüstung (PSA)?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-00" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-00" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-00" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>

<td style="text-align: left;">Wurden die Automatiktüren, Schnelllauftore und Rolltore gemäß den geltenden Regelwerken geprüft und befinden sich diese in einem ordnungsgemäßen Zustand?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Aufzugsanlage geprüft und in einem ordnungsgemäßen Zustand (ohne sichtbare Beschädigungen und mit funktionsfähigen Schutzeinrichtungen)?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Leergutrücknahme in einem ordnungsgemäßen Zustand (Schutzeinrichtungen intakt, Einzugsstellen gesichert, keine Glasscherben)?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Leitern geprüft gemäß „Leitern und Tritte" (BGV D 36) bzw. GUV-VD360?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden aus dem Ordersatz geeignete Sicherheitsmesser verwendet?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind zur Zeit der Begehung keine sichtbaren Beschädigungen an Schaltern und Steckdosen vorhanden?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-6" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-6" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-6" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der Gabelhubwagen in einem ordnungsgemäßen Zustand ohne sichtbare Beschädigungen?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-7" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-7" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-7" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der elektrische Hubwagen geprüft und in einem ordnungsgemäßen Zustand (keine sichtbaren Beschädigungen, funktionsfähige Schutzeinrichtungen)?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-8" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-8" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-8" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Feuerlöscheinrichtungen frei zugänglich und nicht durch Ware, Displays oder sonstige Gegenstände blockiert?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-9" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-9" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-9" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Feuerlöscheinrichtungen geprüft, und werden die Prüffristen eingehalten?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-10" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-10" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-10" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Brandschutztüren frei von Zugestellungen und wird ihre Funktion nicht gestört?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-11" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-11" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-11" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Türhaltevorrichtungen und der Schließfolgeregler des Feuerschutzabschlusses in Ordnung?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-12" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-12" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-12" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Brandschutztüren ohne Beschädigungen?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-13" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-13" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-13" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist ein aktueller Flucht- und Rettungsplan vorhanden?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-14" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-14" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-14" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Notausgangsbeleuchtung ohne Defekte?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-15" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-15" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-15" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Notausgänge frei zugänglich und nicht zugestellt?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-16" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-16" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-16" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Notausgänge und -ausstiege von innen ohne fremde Hilfe zu öffnen und nicht zugestellt?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-17" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-17" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-17" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Führen die Notausgänge in sichere Bereiche?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-18" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-18" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-18" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Verkehrswege so beschaffen, dass kein Unfallrisiko durch Stolpern, Ausrutschen oder Umknicken besteht?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-19" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-19" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-19" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Treppen unbeschädigt und frei von Gegenständen?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-20" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-20" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-20" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wird die passende persönliche Schutzausrüstung (z. B. Schutzbrille, Handschuhe) für Tätigkeiten mit Gefahrstoffen zur Verfügung gestellt?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-21" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-21" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-21" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Technik- und Heizräume frei von brennbaren Materialien (z. B. Kisten, Kartons)?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-22" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-22" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-22" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Technik- und Heizräume frei von Lagernutzung?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-23" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-23" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-23" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind Betriebsanweisungen gut zugänglich und werden Sicherheitsanweisungen eingehalten?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-24" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-24" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-24" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Elektrische Steckverbindungen liegen nicht ungeschützt auf dem Boden, insbesondere in Bereichen (z. B. unter Kühl- oder Tiefkühltruhen)?</td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-25" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-25" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="1.0 Gesamtmarkt-25" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">2.0 Backstation</td></tr>
<tr>
<td style="text-align: left;">Sind die Arbeitsgeräte an der Backstation (Backofen, Backbleche, Brotschneidemaschine) in einem ordnungsgemäßen Zustand?</td>
<td><label class="radio-wrap"><input name="2.0 Backstation-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist das freistehende Handwaschbecken ohne Beschädigungen?</td>
<td><label class="radio-wrap"><input name="2.0 Backstation-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Elektroleitungen intakt und bilden keine Stolperstellen?</td>
<td><label class="radio-wrap"><input name="2.0 Backstation-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Entspricht die Zuleitung der VDE-Norm?</td>
<td><label class="radio-wrap"><input name="2.0 Backstation-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der Backhandschuh für die Backstation in einem ordnungsgemäßen Zustand (kein Verschleiß) und besitzt eine lange Stulpe?</td>
<td><label class="radio-wrap"><input name="2.0 Backstation-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind alle Heißgeräte (z. B. Heißtheken, Fritteusen) in technisch einwandfreiem Zustand?</td>
<td><label class="radio-wrap"><input name="2.0 Backstation-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="2.0 Backstation-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">3.0 Serviceabteilung</td></tr>
<tr>
<td style="text-align: left;">Hängt der Hautschutzplan aus?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Hautschutz- und Hautpflegeprodukte zur Verfügung gestellt?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Arbeitsgeräte im Servicebereich in einem ordnungsgemäßen Zustand?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Bleiben die Thekenscheiben selbstständig in der oberen Stellung stehen?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Glastüren und Glaswände in Augenhöhe gekennzeichnet?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Schneidbretter und Messer regelmäßig gereinigt und farbcodiert verwendet?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Schneidbretter mit Messereinschub verwendet?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-6" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-6" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-6" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Messerhalter verwendet?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-7" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-7" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-7" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Convenience-Geräte in einem ordnungsgemäßen Zustand?</td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-8" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-8" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="3.0 Serviceabteilung-8" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">4.0 Kassenzone</td></tr>
<tr>
<td style="text-align: left;">Ist der Fußraum frei von Gegenständen?</td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der Fußboden im Kassenbereich in einem ordnungsgemäßen Zustand (ohne sichtbare Beschädigungen)?</td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die serienmäßig eingebauten Heizgeräte im Kassenraum nicht durch brennbares Material zugestellt?</td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Kassenstühle in einem funktionsfähigen Zustand?</td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist das Transportband unbeschädigt und weist keine Lücke von über 5 mm auf?</td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Einkaufskörbe ordnungsgemäß im vorgesehenen Ständer abgelegt und ragen nicht in den Verkehrsweg hinein, sodass keine Stolpergefahr besteht?</td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="4.0 Kassenzone-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">5.0 Kühlhaus</td></tr>
<tr>
<td style="text-align: left;">Ist an allen Beleuchtungen in den Kühlhäusern die Überwurfkappe (Schutzkappe/Schutzglas) montiert?</td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Notentriegelung vorhanden und in Ordnung?</td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Kühlhaustüren von innen mit dem Rettungswegschild ISO 7010 gekennzeichnet?</td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Funktioniert die Beleuchtung einwandfrei?</td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Notruf-Funktion (wenn vorhanden) in Ordnung und ohne Beschädigungen?</td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="5.0 Kühlhaus-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">6.0 Lager</td></tr>
<tr>
<td style="text-align: left;">Sind die Schwerlastregale geprüft?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der Anfahrschutz vorhanden?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Traglastangabe an den Schwerlastregalen vorhanden?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Befindet sich eine Absturzsicherung an der Rampe?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Absturzsicherung in einem ordnungsgemäßen Zustand (ohne sichtbare Beschädigungen und mit Kennzeichnung)?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Müll-/Papierpresse geprüft?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Müll-/Papierpresse in einem ordnungsgemäßen Zustand (keine sichtbaren Beschädigungen, intakte Schutzeinrichtungen, fester Stand)?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-6" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-6" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-6" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Verkehrswege so beschaffen, dass kein Risiko zum Stolpern, Ausrutschen oder Umknicken besteht?</td>
<td><label class="radio-wrap"><input name="6.0 Lager-7" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-7" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="6.0 Lager-7" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">7.0 Sozialräume</td></tr>
<tr>
<td style="text-align: left;">Hängen im Sozialbereich die aktuellen aushangpflichtigen Gesetze, Unfallverhütungsvorschriften sowie die Brandschutzordnung Teil A aus?</td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Kaffeemaschine und andere hitzeentwickelnde Geräte auf einer nicht brennbaren Unterlage abgestellt?</td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der Erste-Hilfe-Koffer gut sichtbar an einer geeigneten Stelle montiert?</td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden ortsveränderliche elektrische Betriebsmittel (z. B. Leitungen, Steckverbindungen, Leuchten, Geräte) in angemessenen Zeitabständen geprüft?</td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="7.0 Sozialräume-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">8.0 Marktleiterbüro</td></tr>
<tr>
<td style="text-align: left;">Liegt eine aktuelle Liste sowie Prüfberichte prüfungsbedürftiger Einrichtungen vor?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist der Verbandskasten in einem ordnungsgemäßen Zustand?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wird die "Dokumentation Erste-Hilfe-Leistungen" geführt?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind Maßnahmen getroffen, die den Anreiz zu Raubüberfällen vermindern (z. B. Türspion, feststehender Knauf)?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Tür während des Umgangs mit Zahlungsmitteln verschlossen?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden neue Mitarbeiter vor Aufnahme der Tätigkeit zum Thema Arbeitssicherheit und Brandschutz unterwiesen?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist während der gesamten Ladenöffnungszeit mindestens ein Mitarbeiter mit der Qualifikation zum Ersthelfer anwesend?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-6" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-6" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-6" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist während der gesamten Ladenöffnungszeit mindestens ein Mitarbeiter mit der Qualifikation als Brandschutzhelfer anwesend?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-7" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-7" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-7" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist ein Sicherheitsbeauftragter ausgebildet und bestellt?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-8" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-8" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-8" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wurde die Gefährdungsbeurteilung (GBO) erstellt und ist sie auf dem aktuellen Stand?</td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-9" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-9" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="8.0 Marktleiterbüro-9" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">9.0 CO2 Kühleinrichtungen</td></tr>
<tr>
<td style="text-align: left;">Wurden Personen, die sich im Bereich von Kühlanlagen oder Kühlhäusern aufhalten, unterwiesen?</td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind die Sensoren nicht mit Material oder sonstigen Gegenständen verstellt?</td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind alle Sicherheitsvorrichtungen (Alarmleuchten, Kennzeichnungen, Kühlhaustüren) intakt?</td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="9.0 CO2 Kühleinrichtungen-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">10.0 Praktikanten</td></tr>
<tr>
<td style="text-align: left;">Wurde die Unterweisung von Praktikanten und Schüleraushilfen durchgeführt?</td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wurde die Unterweisung schriftlich dokumentiert?</td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Haben die Personen die Inhalte der Unterweisung verstanden?</td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="10.0 Praktikanten-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">11.0 Arbeitsmedizin</td></tr>
<tr>
<td style="text-align: left;">Wird den Beschäftigten arbeitsmedizinische Vorsorge angeboten?</td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Hat eine arbeitsmedizinische Betreuung vor Ort stattgefunden (z. B. Sprechstunde, Arbeitsplatzbegehung)?</td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Erfolgten arbeitsmedizinische Beratungen für Beschäftigte oder Führungskräfte?</td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind Maßnahmen gegen Hauterkrankungen getroffen?</td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Berichte und Empfehlungen des Betriebsarztes dokumentiert und umgesetzt?</td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Sind sanitäre Anlagen und Pausenräume sauber, funktionsfähig und ausreichend mit Hygieneartikeln bestückt?</td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-6" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-6" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="11.0 Arbeitsmedizin-6" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr><td class="category-header" colspan="4" style="text-align: left;">12.0 Psychische Belastung</td></tr>
<tr>
<td style="text-align: left;">Werden Wünsche der Beschäftigten bei der Arbeitsplanung berücksichtigt?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-0" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-0" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-0" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Pausenregelung umgesetzt?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-1" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-1" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-1" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist ein Pausenraum vorhanden?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-2" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-2" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-2" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Überstunden gering gehalten?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-3" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-3" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-3" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden regelmäßige Teambesprechungen durchgeführt?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-4" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-4" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-4" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden neue Mitarbeiter eingearbeitet?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-5" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-5" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-5" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist eine Unterweisung zum Thema Brand- und Arbeitsschutz erfolgt?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-6" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-6" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-6" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Hängt ein sogenanntes schwarzes Brett im Sozialraum oder Kassenbüro?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-7" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-7" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-7" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Entscheidungen transparent erläutert?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-8" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-8" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-8" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Gibt es positive Rückmeldungen bei guter Leistung?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-9" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-9" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-9" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wird konstruktive Kritik geübt?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-10" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-10" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-10" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wurden Weiterbildungsmöglichkeiten geschaffen bzw. angeboten?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-11" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-11" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-11" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Gibt es einen Aushang zur Information über die Suchtprävention?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-12" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-12" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-12" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist ein betriebliches Wiedereingliederungsmanagement implementiert?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-13" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-13" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-13" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Wird Alleinarbeit vermieden?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-14" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-14" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-14" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Ist die Betreuung nach einem Überfall organisiert?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-15" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-15" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-15" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
<tr>
<td style="text-align: left;">Werden Schulungen für den Umgang mit gewalttätigen Situationen ermöglicht?</td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-16" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-16" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="12.0 Psychische Belastung-16" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>

<tr>
<td style="text-align: left;">Beziehen Sie Mitarbeiteranregungen in die Entscheidungsprozesse mit ein?</td>
<td><label class="radio-wrap"><input name="13.0 Psychische Belastung-17" type="radio" value="ja"/><span>Ja</span></label></td>
<td><label class="radio-wrap"><input name="13.0 Psychische Belastung-17" type="radio" value="nein"/><span>Nein</span></label></td>
<td><label class="radio-wrap"><input name="13.0 Psychische Belastung-17" type="radio" value="nicht_vorhanden"/><span>N/V</span></label></td>
</tr>
</tbody>
</table>
<br/>
<div class="massnahmen-section">
<h2 class="force-pagebreak" style="text-align: center;">
    Beschreibung der Maßnahmen zur Beseitigung von Defiziten
  </h2>
<br/>
<table>
<thead>
<tr>
<th>Nr.</th>
<th>Frage</th>
<th>Maßnahme</th>
</tr>
</thead>
<tbody id="maßnahmen-tabelle">
</tbody>
</table>
</div>
<div class="page-break-before confirmation-section">
<h2>Abschlussbestätigung</h2>
<div class="checkbox-row">
<div class="checkbox-column">
<label for="mangel">
<input id="mangel" type="checkbox"/>
<span>Alle Mängel wurden zur Kenntnis genommen.</span>
</label>
<label for="massnahmen">
<input id="massnahmen" type="checkbox"/>
<span>Maßnahmen gemäß Plan werden umgesetzt.</span>
</label>
</div>
<div class="checkbox-column">
<label for="nachkontrolle">
<input id="nachkontrolle" type="checkbox"/>
<span>Nachkontrolle wird durchgeführt.</span>
</label>
<label for="mitarbeiter">
<input id="mitarbeiter" type="checkbox"/>
<span>Mitarbeiter wurden informiert.</span>
</label>
</div>
</div>
</div>
<div class="signature-container" style="position: relative; max-width: 600px; margin: 0 auto 20px auto;">
<label style="
  position: absolute;
  top: 8px;
  left: 12px;
  background: white;
  padding: 0 6px;
  font-weight: bold;
  font-size: 14px;
  color: #212529;
  pointer-events: none;
  user-select: none;
  z-index: 10;
">Unterschrift</label>
<canvas id="signature-pad" style="
  border: 2px solid #ddd;
  border-radius: 16px;
  width: 100%;
  height: 150px;
  touch-action: none;
  display: block;
"></canvas>
</div>
<button class="btn-large btn-gray" onclick="clearSignature()" style="display: block; width: 600px; margin: 10px auto;">
🗑️ Unterschrift löschen
</button>
<div style="display: flex; justify-content: center; gap: 20px; max-width: 600px; margin: 0 auto;">
<button class="btn-medium btn-gray" onclick="exportiereMassnahmen()" style="flex: 1; max-width: 280px;">
    📝 Defizite exportieren
  </button>
<button class="btn-medium btn-gray" onclick="prepareForPrint()" style="flex: 1; max-width: 280px;">
    📄 Drucken / PDF
  </button>
</div>
<div style="display: flex; justify-content: center; gap: 20px; max-width: 600px; margin: 0 auto 40px;">
<button class="btn-medium btn-green" onclick="manuellSpeichern()" style="flex: 1; max-width: 280px;">
    💾 Speichern
  </button>
<button class="btn-medium btn-gray" onclick="formularZuruecksetzen()" style="flex: 1; max-width: 280px;">
    🧹 Zurücksetzen
  </button>
</div>
<button class="custom-btn" onclick="generateAndSharePDF()" style="background-color: #C62828; width: 600px; margin: 10px auto 40px auto; display: block;">
📤 PDF teilen (iPad)
</button>
<button class="custom-btn" onclick="weiterZuFotos()" style="background-color: green; width: 600px; margin: 10px auto 40px auto; display: block;">
    📸 Zur Foto-Seite
  </button>
</div>
<script>
function weiterZuFotos() {
  const marktnummer = document.getElementById('markt')?.value || '';
  const name = document.getElementById('name')?.value || '';
  const sifa = document.getElementById('sifa')?.value || '';

  // Prüfen, ob alle Felder ausgefüllt sind
  if (!marktnummer || !name || !sifa) {
    alert('Bitte fülle Marktnummer, Name und SiFa aus, bevor du fortfährst.');
    return;
  }

  // URL mit Übergabeparametern bauen
  const url = `foto.html?marktnummer=${encodeURIComponent(marktnummer)}&name=${encodeURIComponent(name)}&sifa=${encodeURIComponent(sifa)}`;

  // Seite in neuem Tab öffnen
  window.open(url, '_blank');
}
</script>
<div id="auswertung-container">
<div id="auswertung"></div>
</div>
<footer style="
  text-align: center;
  margin-top: 40px;
  padding: 16px 8px;
  font-size: 12px;
  color: #999;
  background-color: #f7f7f7;
  border-top: 1px solid #eee;
  border-radius: 0 0 10px 10px;">
  © <span id="year"></span> Andreas Zott – Alle Rechte vorbehalten<br/>
<span style="font-size: 11px;">(Sifa) Arbeitssicherheit <span id="year-small"></span></span>
<div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
<div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 8px;">
<a href="impressum.html" style="color: #D32F2F; text-decoration: none; font-size: 13px;">Impressum</a>
<a href="datenschutz.html" style="color: #D32F2F; text-decoration: none; font-size: 13px;">Datenschutz</a>
<a href="welcome.html" style="color: #D32F2F; text-decoration: none; font-size: 13px;">Startseite</a>
</div>
<p style="margin: 0; font-size: 12px; color: #6b7280;">
</p>
</div><div style="font-size:11px; color:#777; margin-top:8px;">Stand: Dezember 2025</div>
</footer>
<script>
  const year = new Date().getFullYear();
  document.getElementById('year').textContent = year;
  document.getElementById('year-small').textContent = year;
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
// Improved PDF generation function to prevent empty pages
async function generateAndSharePDF() {
  // Alle Buttons & no-print-Elemente temporär ausblenden
  const buttons = document.querySelectorAll('button, .btn, .btn-group, .buttons, .custom-btn, .btn-medium, .btn-large');
  const noPrintElems = document.querySelectorAll('footer, .no-print');
  const originalDisplays = [];
  buttons.forEach((btn, index) => {
    originalDisplays[index] = btn.style.display;
    btn.style.display = 'none';
  });
  noPrintElems.forEach(el => el.style.display = 'none');
  
  // Hide empty rows before PDF generation
  const emptyRows = document.querySelectorAll('#maßnahmen-tabelle tr.empty-row');
  emptyRows.forEach(row => {
    const cells = row.querySelectorAll('td');
    let hasContent = false;
    cells.forEach(cell => {
      if (cell.textContent.trim() && !cell.textContent.match(/^\d+$/)) {
        hasContent = true;
      }
    });
    if (!hasContent) {
      row.style.display = 'none';
    }
  });
    
  const canvas = document.getElementById('signature-pad');
  let signatureImg = null;
  if (canvas) {
    const dataURL = canvas.toDataURL();
    signatureImg = document.createElement('img');
    signatureImg.src = dataURL;
    signatureImg.style.border = '2px solid #000';
    signatureImg.style.width = '100%';
    signatureImg.style.maxWidth = '600px';
    signatureImg.style.height = '150px';
    canvas.style.display = 'none';
    canvas.parentNode.insertBefore(signatureImg, canvas);
  }  
  
  const printable = document.querySelector('.print-wrapper') || document.body;
  
  // Removed problematic transform scaling
  // const pdfScale = 0.75;
  // printable.style.transformOrigin = 'top left';
  // printable.style.webkitTransformOrigin = 'top left';
  // printable.style.transform = 'scale(' + pdfScale + ')';
  // printable.style.webkitTransform = 'scale(' + pdfScale + ')';
  // printable.style.width = (100 / pdfScale) + '%';
  
  const element = printable;
  const today = new Date();
  const formattedDate = today.toLocaleDateString('de-DE');
  
  // Improved PDF options to prevent empty pages
  const opt = {
    pagebreak: { 
      mode: ['css', 'legacy'], 
      avoid: ['tr', '.category-section', '.confirmation-section', '.signature-container'],
      before: [] // Removed automatic page breaks
    },
    margin: [12, 10, 15, 10],
    filename: `Arbeitssicherheit-Begehungsprotokoll-${formattedDate}.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: {
      scale: 2,
      scrollY: 0,
      useCORS: true,
      allowTaint: true,
      logging: false,
      windowHeight: document.documentElement.scrollHeight // Capture full height
    },
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
  };
  
  function addPageNumbers(pdf) {
    const pageCount = pdf.internal.getNumberOfPages();
    pdf.setFontSize(8);
    for (let i = 1; i <= pageCount; i++) {
      pdf.setPage(i);
      const pageWidth = pdf.internal.pageSize.getWidth();
      const pageHeight = pdf.internal.pageSize.getHeight();
      pdf.text('Seite ' + i + ' / ' + pageCount, pageWidth / 2, pageHeight - 10, {align: 'center'});
    }
  }


  
  try {
    const worker = html2pdf().set(opt).from(element);
    const pdf = await worker.toPdf().get('pdf');
    addPageNumbers(pdf);
    const blob = pdf.output('blob');
    const file = new File([blob], opt.filename, { type: "application/pdf" });
    if (navigator.canShare && navigator.canShare({ files: [file] })) {
      await navigator.share({
    title: `Arbeitssicherheit-Checkliste aus dem Markt ${marktnummer}`,
    text: `Sehr geehrte Damen und Herren,

anbei übermittle ich Ihnen die Begehungsliste für den Markt ${marktnummer} zur sachlichen Prüfung und weiteren Verwendung.

Für Rückfragen oder ergänzende Informationen stehe ich Ihnen jederzeit gerne zur Verfügung.

Mit freundlichen Grüßen
Fachkraft für Arbeitssicherheit (SiFa): ${sifa}
(${name})`,
    files: [file],
});
    } else {
      alert("📤 Teilen nicht unterstützt – PDF wird heruntergeladen.");
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = opt.filename;
      link.click();
    }
  } catch (error) {
    console.error("Fehler bei PDF-Generierung:", error);
    alert("Fehler bei der PDF-Erstellung. Bitte versuchen Sie es erneut.");
  } finally {
    // Elemente wieder einblenden
    buttons.forEach((btn, index) => {
      btn.style.display = originalDisplays[index];
    });
    noPrintElems.forEach(el => el.style.display = '');
    
    // Restore empty rows visibility
    emptyRows.forEach(row => {
      row.style.display = '';
    });
    
    // Removed transform reset since we don't use it anymore
    // try {
    //   if (typeof printable !== 'undefined' && printable) {
    //     printable.style.transform = '';
    //     printable.style.webkitTransform = '';
    //     printable.style.width = '';
    //     printable.style.transformOrigin = '';
    //     printable.style.webkitTransformOrigin = '';
    //   }
    // } catch (e) {
    //   console.warn('Fehler beim Zurücksetzen der PDF-Transform:', e);
    // }   
    
    if (canvas && signatureImg) {
      canvas.style.display = 'block';
      signatureImg.remove();
    }
  }
}

const canvas = document.getElementById('signature-pad');
const ctx = canvas.getContext('2d');
let drawing = false;
function resizeCanvas() {
  const ratio = window.devicePixelRatio || 1;
  const displayWidth = canvas.offsetWidth;
  const displayHeight = canvas.offsetHeight;
  const oldImage = new Image();
  oldImage.src = canvas.toDataURL();
  canvas.width = displayWidth * ratio;
  canvas.height = displayHeight * ratio;
  canvas.style.width = displayWidth + "px";
  canvas.style.height = displayHeight + "px";
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  ctx.scale(ratio, ratio);
  oldImage.onload = () => {
    ctx.drawImage(oldImage, 0, 0, displayWidth, displayHeight);
  };
}
function getX(e) {
  return e.touches ? e.touches[0].clientX - canvas.getBoundingClientRect().left :
                     e.clientX - canvas.getBoundingClientRect().left;
}

function getY(e) {
  return e.touches ? e.touches[0].clientY - canvas.getBoundingClientRect().top :
                     e.clientY - canvas.getBoundingClientRect().top;
}

function startDrawing(e) {
  drawing = true;
  ctx.beginPath();
  ctx.moveTo(getX(e), getY(e));
}

function draw(e) {
  if (!drawing) return;
  ctx.lineTo(getX(e), getY(e));
  ctx.stroke();
}

function stopDrawing() {
  drawing = false;
  saveSignature();
}

function clearSignature() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  localStorage.removeItem("signatureImage");
}

function saveSignature() {
  const dataURL = canvas.toDataURL();
  localStorage.setItem("signatureImage", dataURL);
}

function restoreSignature() {
  const dataURL = localStorage.getItem("signatureImage");
  if (dataURL) {
    const image = new Image();
    image.onload = () => {
      ctx.drawImage(image, 0, 0, canvas.offsetWidth, canvas.offsetHeight);
    };
    image.src = dataURL;
  }
}
function prepareForPrint() {
  const dataURL = canvas.toDataURL();
  const img = document.createElement("img");
  img.src = dataURL;
  img.style.border = "2px solid #000";
  img.style.width = "100%";
  img.style.maxWidth = "600px";
  canvas.replaceWith(img);
  window.print();
}
function generateMeasure(question) {
  let measure = question.trim();

  // Remove trailing question mark
  if (measure.endsWith("?")) {
    measure = measure.slice(0, -1);
  }


if (measure.includes("festes, geschlossenes und flaches Schuhwerk")) {
  measure = "Sorgen Sie gemäß § 3 Abs. 1 ArbSchG dafür, dass alle Personen im Markt festes, geschlossenes und flaches Schuhwerk tragen, um arbeitsbedingte Gesundheitsgefahren wirksam zu vermeiden.";
}
if (measure.includes("Beachten die Mitarbeitenden die Betriebsanweisung für das Flurförderfahrzeug, insbesondere hinsichtlich der vorgeschriebenen Persönlichen Schutzausrüstung")) {
  measure = "Unterweisen Sie die Mitarbeitenden erneut zur ordnungsgemäßen Nutzung des Flurförderfahrzeugs und weisen Sie ausdrücklich auf die verpflichtende Verwendung der vorgeschriebenen Persönlichen Schutzausrüstung (PSA) gemäß DGUV Vorschrift 68 und BetrSichV hin. Führen Sie regelmäßige Kontrollen durch und dokumentieren Sie die Einhaltung.";
}

if (measure.includes("Automatiktüren") || measure.includes("Rolltoren") || measure.includes("Schnelllauftoren")) {
  measure = "Fachgerechte Prüfung der betroffenen Türen/Tore nach ASR A1.7 umgehend veranlassen. Betrieb bis zur Prüfung ggf. einschränken. Festgestellte Mängel zügig beheben und Dokumentation aktualisieren.";
}

if (measure.includes("Aufzugsanlage")) {
  measure = "Veranlassen Sie gemäß § 4 BetrSichV regelmäßige Prüfungen der Aufzugsanlage, um deren ordnungsgemäßen und sicheren Zustand sicherzustellen.";
}

if (measure.includes("Leergutrücknahme")) {
  measure = "Stellen Sie sicher, dass die Leergutrücknahme gemäß DGUV Regel 100-500 (Kapitel 2.10) technisch einwandfrei, mit funktionierenden Schutzeinrichtungen versehen und frei von Gefährdungen durch Glasscherben ist.";
}

if (measure.includes("Leitern") || measure.includes("Tritte")) {
  measure = "Führen Sie regelmäßige Prüfungen aller Leitern und Tritte nach DGUV Information 208-016 sowie gemäß den Regelungen der BetrSichV durch und dokumentieren Sie diese nachvollziehbar.";
}

if (measure.includes("Sicherheitsmesser")) {
  measure = "Stellen Sie auf Grundlage der Gefährdungsbeurteilung sicher, dass ausschließlich geeignete, im Ordersatz festgelegte Sicherheitsmesser verwendet werden, um Schnittverletzungen zu vermeiden (§§ 4–5 ArbSchG).";
}

if (measure.includes("Schaltern und Steckdosen")) {
  measure = "Veranlassen Sie die regelmäßige Sichtprüfung aller Schalter und Steckdosen und stellen Sie gemäß TRBS 1201 sicher, dass keine erkennbaren Schäden vorliegen.";
}

if (measure.includes("Gabelhubwagen")) {
  measure = "Sorgen Sie für eine regelmäßige technische Kontrolle und Instandhaltung des Gabelhubwagens gemäß DGUV Vorschrift 68 (Flurförderzeuge), um dessen ordnungsgemäßen Zustand zu gewährleisten.";
}

if (measure.includes("elektrische Hubwagen")) {
  measure = "Stellen Sie sicher, dass elektrische Hubwagen gemäß Betriebssicherheitsverordnung und DGUV Regel 100-500 geprüft und mit intakten Schutzeinrichtungen betrieben werden.";
}

if (measure.includes("Feuerlöscheinrichtungen frei zugänglich")) {
  measure = "Halten Sie alle Feuerlöscheinrichtungen gemäß ASR A2.2 und § 10 ArbSchG stets frei zugänglich, um eine unverzügliche Nutzung im Brandfall zu gewährleisten.";
}

if (measure.includes("Feuerlöscheinrichtungen geprüft")) {
  measure = "Veranlassen Sie Prüfungen aller Feuerlöscher durch befähigte Personen nach DIN 14406-4 und sorgen Sie für die Einhaltung der vorgeschriebenen Prüffristen gemäß § 10 ArbSchG.";
}

if (measure.includes("Brandschutztüren frei von Zugestellungen")) {
  measure = "Achten Sie gemäß ASR A2.3 darauf, dass Brandschutztüren jederzeit frei zugänglich und in ihrer Funktion nicht beeinträchtigt sind.";
}

if (measure.includes("Türhaltevorrichtungen") || measure.includes("Schließfolgeregler")) {
  measure = "Sorgen Sie dafür, dass Türhaltevorrichtungen und Schließfolgeregler an Brandschutztüren regelmäßig auf ihre Funktionsfähigkeit überprüft werden (vgl. DIN 14677).";
}

if (measure.includes("Brandschutztüren ohne Beschädigungen")) {
  measure = "Prüfen Sie regelmäßig den Zustand aller Brandschutztüren auf Beschädigungen und stellen Sie ihre uneingeschränkte Schutzwirkung sicher (§ 4 ArbSchG).";
}

if (measure.includes("Flucht- und Rettungsplan")) {
  measure = "Hängen Sie einen aktuellen und übersichtlichen Flucht- und Rettungsplan gemäß ASR A1.3 und § 4 ArbStättV gut sichtbar aus.";
}

if (measure.includes("Notausgangsbeleuchtung ohne Defekte")) {
  measure = "Stellen Sie sicher, dass die Notausgangsbeleuchtung gemäß ASR A3.4/3 fehlerfrei funktioniert, um bei Stromausfall eine sichere Flucht zu ermöglichen.";
}

if (measure.includes("Notausgänge frei zugänglich")) {
  measure = "Halten Sie Notausgänge zu jeder Zeit frei zugänglich und vermeiden Sie jedwede Art von Verstellung gemäß § 4 ArbStättV i. V. m. ASR A2.3.";
}

if (measure.includes("Sind die Notausgänge und -ausstiege von innen ohne fremde Hilfe zu öffnen und nicht zugestellt")) {
  measure = "Sorgen Sie dafür, dass Notausgänge jederzeit ohne fremde Hilfe von innen zu öffnen sind (§ 4 Abs. 4 ArbStättV).";
}

if (measure.includes("Notausgänge in sichere Bereiche")) {
  measure = "Vergewissern Sie sich, dass alle Notausgänge in gesicherte, gefahrenfreie Bereiche führen und so der Schutz der Beschäftigten gewährleistet ist.";
}

if (measure.includes("Verkehrswege so beschaffen")) {
  measure = "Gestalten und erhalten Sie Verkehrswege so, dass sie frei von Stolper-, Rutsch- oder Sturzgefahren sind (§ 3a ArbStättV, ASR A1.8).";
}

if (measure.includes("Treppen unbeschädigt")) {
  measure = "Stellen Sie sicher, dass alle Treppen frei von Hindernissen sind und keine baulichen Mängel aufweisen, um die Unfallgefahr gemäß ASR A1.8 zu minimieren.";
}

if (measure.includes("persönliche Schutzausrüstung") || measure.includes("Schutzbrille") || measure.includes("Handschuhe")) {
  measure = "Stellen Sie geeignete persönliche Schutzausrüstung (PSA) für Tätigkeiten mit Gefahrstoffen bereit und weisen Sie die Beschäftigten gemäß § 3 ArbSchG und § 2 PSA-Benutzungsverordnung ein.";
}

if (measure.includes("Sind die Technik- und Heizräume frei von brennbaren Materialien")) {
  measure = "Lagern Sie gemäß ASR A2.2 und Brandschutzordnung Teil C keine brennbaren Materialien in Technik- oder Heizräumen, um Brandrisiken zu vermeiden.";
}

if (measure.includes("Sind die Technik- und Heizräume frei von Lagernutzung")) {
  measure = "Verwenden Sie Technik- und Heizräume ausschließlich für ihre bestimmungsgemäße Nutzung, da eine Lagerung dort gegen Brandschutzvorgaben verstößt (§ 3 ArbSchG).";
}

if (measure.includes("Betriebsanweisungen gut zugänglich")) {
  measure = "Halten Sie alle Betriebsanweisungen gut zugänglich und stellen Sie sicher, dass die Beschäftigten über die Inhalte unterwiesen sind (§§ 4, 12 ArbSchG).";
}
if (measure.includes("Elektrische Steckverbindungen liegen nicht ungeschützt auf dem Boden, insbesondere in Bereichen")) {
  measure = "Steckverbindungen sind so zu verlegen, dass sie gegen Feuchtigkeit, Schmutz und mechanische Beanspruchung geschützt sind. Leitungen und Verbindungen dürfen nicht auf dem Boden liegen, insbesondere nicht unter Kühlmöbeln und sichern Sie diese gemäß § 3 ArbSchG und ASR A1.5 gegen unbeabsichtigtes Lösen";
}

if (measure.includes("Arbeitsgeräte an der Backstation")) {
  measure = "Stellen Sie sicher, dass sämtliche Arbeitsgeräte in der Backstation regelmäßig gewartet und auf ordnungsgemäßen Zustand geprüft werden (§ 4 ArbSchG, BetrSichV § 10).";
}

if (measure.includes("freistehende Handwaschbecken ohne Beschädigungen")) {
  measure = "Kontrollieren Sie freistehende Handwaschbecken regelmäßig auf Beschädigungen und sichern Sie deren Hygiene und Funktion gemäß ArbStättV § 6.";
}

if (measure.includes("Elektroleitungen intakt und bilden keine Stolperstellen")) {
  measure = "Führen Sie regelmäßige Sichtprüfungen elektrischer Leitungen durch, um sicherzustellen, dass keine Stolper- oder Brandgefahren gemäß DGUV Vorschrift 3 entstehen.";
}

if (measure.includes("Zuleitung der VDE-Norm")) {
  measure = "Vergewissern Sie sich, dass sämtliche elektrischen Zuleitungen den Vorgaben der VDE-Normen entsprechen, um elektrische Gefährdungen auszuschließen (§ 3 ArbSchG, BetrSichV).";
}

if (measure.includes("Ist der Backhandschuh für die Backstation in einem ordnungsgemäßen Zustand")) {
  measure = "Verwenden Sie nur hitzebeständige Backhandschuhe in einwandfreiem Zustand und mit langer Stulpe gemäß PSA-Benutzungsverordnung und § 3 ArbSchG.";
}

if (measure.includes("Sind alle Heißgeräte (z. B. Heißtheken, Fritteusen) in technisch einwandfreiem Zustand")) {
  measure = "Prüfen Sie regelmäßig alle Heißgeräte (z. B. Heißtheken, Fritteusen) auf technische Mängel und dokumentieren Sie die Instandhaltung gemäß BetrSichV § 10.";
}

if (measure.includes("Hautschutzplan")) {
  measure = "Hängen Sie einen aktuellen Hautschutzplan gut sichtbar aus und stellen Sie sicher, dass er von allen Beschäftigten verstanden und umgesetzt wird (§ 5 ArbSchG, TRGS 401).";
}

if (measure.includes("Hautschutz- und Hautpflegeprodukte")) {
  measure = "Stellen Sie geeignete Hautschutz- und Hautpflegeprodukte bereit, um berufsbedingten Hauterkrankungen gemäß § 3 ArbSchG vorzubeugen.";
}

if (measure.includes("Arbeitsgeräte im Servicebereich")) {
  measure = "Veranlassen Sie regelmäßige Sicht- und Funktionsprüfungen der Arbeitsgeräte im Servicebereich gemäß § 4 BetrSichV.";
}

if (measure.includes("Thekenscheiben selbstständig in der oberen Stellung stehen")) {
  measure = "Sorgen Sie dafür, dass Thekenscheiben selbstständig in der oberen Position arretiert werden können, um Verletzungsrisiken auszuschließen (§ 3 ArbSchG).";
}

if (measure.includes("Glastüren und Glaswände in Augenhöhe gekennzeichnet")) {
  measure = "Kennzeichnen Sie Glastüren und Glaswände in Augenhöhe mit deutlich sichtbaren Markierungen gemäß ASR A1.3 und DGUV Information 208-004.";
}

if (measure.includes("Schneidbretter und Messer regelmäßig gereinigt")) {
  measure = "Reinigen und desinfizieren Sie Schneidbretter und Messer regelmäßig und wenden Sie ein Farbsystem zur hygienischen Trennung an (§ 3 ArbSchG, HACCP).";
}

if (measure.includes("Schneidbretter mit Messereinschub")) {
  measure = "Verwenden Sie Schneidbretter mit sicherem Messereinschub, um Schnittverletzungen zu vermeiden und die Lagerung gemäß § 3 ArbSchG sicher zu gestalten.";
}

if (measure.includes("Messerhalter verwendet")) {
  measure = "Sorgen Sie für eine sichere Aufbewahrung von Messern durch geeignete Halterungen gemäß § 3 ArbSchG und DGUV Regel 100-500.";
}

if (measure.includes("Convenience-Geräte in einem ordnungsgemäßen Zustand")) {
  measure = "Führen Sie regelmäßige Wartungen und Funktionsprüfungen an Convenience-Geräten durch, um deren sicheren Betrieb zu gewährleisten (§ 4 BetrSichV).";
}

if (measure.includes("Fußraum frei von Gegenständen")) {
  measure = "Halten Sie den Fußraum dauerhaft frei von Gegenständen, um Unfallgefahren durch Stolpern oder Hängenbleiben zu vermeiden (§ 3 ArbSchG, ASR A1.8).";
}

if (measure.includes("Fußboden im Kassenbereich in einem ordnungsgemäßen Zustand")) {
  measure = "Sorgen Sie für die Instandhaltung und Rutschhemmung des Fußbodens im Kassenbereich gemäß ASR A1.5/1,2 und § 3 ArbSchG.";
}

if (measure.includes("Heizgeräte im Kassenraum nicht durch brennbares Material zugestellt")) {
  measure = "Stellen Sie sicher, dass Heizgeräte frei zugänglich und nicht durch brennbare Materialien blockiert sind, um Brandgefahren gemäß ASR A2.2 zu vermeiden.";
}

if (measure.includes("Kassenstühle in einem funktionsfähigen Zustand")) {
  measure = "Prüfen Sie Kassenstühle regelmäßig auf Funktionalität und stellen Sie ergonomische Arbeitsmittel gemäß ArbStättV Anhang Nr. 6 bereit.";
}



if (measure.includes("Transportband unbeschädigt")) {
  measure = "Überprüfen Sie Transportbänder regelmäßig auf Schäden und sorgen Sie dafür, dass keine Lücken über 5 mm entstehen, um Verletzungsrisiken auszuschließen (§ 3 ArbSchG).";
}

if (measure.includes("Einkaufskörbe ordnungsgemäß im vorgesehenen Ständer")) {
  measure = "Einkaufskörbe sofort korrekt im dafür vorgesehenen Ständer einsortieren und den Bereich freiräumen. Mitarbeiter anweisen, regelmäßige Sichtkontrollen durchzuführen, um Stolperstellen durch herausragende oder falsch abgestellte Körbe zu vermeiden.";
}

if (measure.includes("Ist an allen Beleuchtungen in den Kühlhäusern die Überwurfkappe (Schutzkappe/Schutzglas) montiert")) {
  measure = "Sichern Sie Beleuchtungseinrichtungen in Kühlhäusern mit Schutzabdeckungen gegen mechanische Einwirkungen und Glasbruch gemäß DIN 10500.";
}

if (measure.includes("Notentriegelung vorhanden")) {
  measure = "Stellen Sie sicher, dass Notentriegelungen an Kühlraumtüren installiert, gekennzeichnet und jederzeit funktionsfähig sind (§ 3 ArbSchG, TRBS 2121 Teil 2).";
}

if (measure.includes("Kühlhaustüren von innen mit dem Rettungswegschild ISO 7010 gekennzeichnet")) {
  measure = "Kennzeichnen Sie Kühlhaustüren von innen mit dem international gültigen Rettungswegsymbol gemäß ISO 7010 und ASR A1.3.";
}

if (measure.includes("Beleuchtung einwandfrei")) {
  measure = "Stellen Sie eine ausreichende, blendfreie und funktionstüchtige Beleuchtung aller Arbeitsbereiche gemäß ASR A3.4 sicher.";
}
if (measure.includes("Ist die Notruf-Funktion (wenn vorhanden) in Ordnung und ohne Beschädigungen")) {
  measure = "Stellen Sie sicher, dass die Notruf-Funktion in Kühlräumen jederzeit funktionsfähig ist und regelmäßig geprüft wird (§ 4 ArbSchG, TRBS 3121).";
}

if (measure.includes("Schwerlastregale geprüft")) {
  measure = "Veranlassen Sie regelmäßige Prüfungen aller Schwerlastregale durch befähigte Personen gemäß BetrSichV § 14 sowie DGUV Regel 108-007.";
}

if (measure.includes("Anfahrschutz vorhanden")) {
  measure = "Installieren Sie gemäß DGUV Vorschrift 68 und ASR A1.3 einen geeigneten Anfahrschutz an allen relevanten Bereichen, um strukturelle Schäden zu vermeiden.";
}

if (measure.includes("Traglastangabe an den Schwerlastregalen vorhanden")) {
  measure = "Bringen Sie an jedem Regal deutlich sichtbare und dauerhafte Traglastangaben an, wie es § 4 BetrSichV i.V.m. TRBS 1201 fordert.";
}

if (measure.includes("Absturzsicherung an der Rampe")) {
  measure = "Sorgen Sie dafür, dass an Rampen mit Absturzkante geeignete Absturzsicherungen gemäß ASR A2.1 installiert sind.";
}

if (measure.includes("Absturzsicherung in einem ordnungsgemäßen Zustand")) {
  measure = "Überprüfen Sie regelmäßig die Absturzsicherung auf Schäden und achten Sie auf gut sichtbare Warnkennzeichnungen (§ 4 ArbSchG).";
}

if (measure.includes("Müll-/Papierpresse geprüft")) {
  measure = "Lassen Sie Müll- und Papierpressen regelmäßig durch befähigte Personen gemäß BetrSichV und DGUV Regel 100-500 prüfen.";
}

if (measure.includes("Müll-/Papierpresse in einem ordnungsgemäßen Zustand")) {
  measure = "Stellen Sie sicher, dass die Müll-/Papierpresse technisch einwandfrei, standsicher und mit intakten Schutzeinrichtungen betrieben wird (§ 3 ArbSchG, § 4 BetrSichV).";
}

if (measure.includes("Verkehrswege so beschaffen, dass kein Risiko")) {
  measure = "Achten Sie darauf, dass Verkehrswege eben, rutschfest und frei von Hindernissen sind, um Gefährdungen durch Stolpern, Ausrutschen oder Umknicken gemäß ASR A1.8 zu vermeiden.";
}

if (measure.includes("Sozialbereich die aktuellen aushangpflichtigen Gesetze")) {
  measure = "Bringen Sie im Sozialbereich alle gesetzlich vorgeschriebenen Aushänge (z. B. ArbSchG, JArbSchG, DGUV Vorschrift 1) gut sichtbar und aktuell an (§ 12 ArbSchG).";
}

if (measure.includes("Kaffeemaschine und andere hitzeentwickelnde Geräte auf einer nicht brennbaren Unterlage")) {
  measure = "Betreiben Sie hitzeentwickelnde Geräte ausschließlich auf nicht brennbaren Unterlagen, um Brandgefahren gemäß ASR A2.2 zu vermeiden.";
}

if (measure.includes("Erste-Hilfe-Koffer gut sichtbar")) {
  measure = "Platzieren Sie den Erste-Hilfe-Koffer gut sichtbar, dauerhaft zugänglich und gemäß DGUV Vorschrift 1 an einem geeigneten Ort.";
}

if (measure.includes("Werden ortsveränderliche elektrische Betriebsmittel (z. B. Leitungen, Steckverbindungen, Leuchten, Geräte) in angemessenen Zeitabständen geprüft")) {
  measure = "Führen Sie regelmäßige Prüfungen ortsveränderlicher elektrischer Betriebsmittel durch befähigte Elektrofachkräfte gemäß DGUV Vorschrift 3 und TRBS 1201.";
}

if (measure.includes("aktuelle Liste sowie Prüfberichte prüfungsbedürftiger Einrichtungen")) {
  measure = "Führen Sie eine vollständige Liste aller prüfpflichtigen Betriebseinrichtungen inklusive Nachweise und Prüfberichte gemäß BetrSichV § 14.";
}

if (measure.includes("Verbandskasten in einem ordnungsgemäßen Zustand")) {
  measure = "Kontrollieren Sie den Inhalt des Verbandskastens regelmäßig und stellen Sie die Vollständigkeit und Haltbarkeit der Materialien sicher (DIN 13157, DGUV Vorschrift 1).";
}

if (measure.includes("Dokumentation Erste-Hilfe-Leistungen")) {
  measure = "Führen Sie eine schriftliche Dokumentation aller Erste-Hilfe-Leistungen im Verbandbuch gemäß § 24 DGUV Vorschrift 1 und bewahren Sie diese vier Jahre auf.";
}

if (measure.includes("Anreiz zu Raubüberfällen vermindern")) {
  measure = "Ergreifen Sie organisatorische und bauliche Maßnahmen zur Prävention von Raubüberfällen, etwa durch Türspione, Sicherheitsknäufe oder videoüberwachte Eingänge (§ 3 ArbSchG, DGUV Information 215-542).";
}

if (measure.includes("Tür während des Umgangs mit Zahlungsmitteln verschlossen")) {
  measure = "Sorgen Sie dafür, dass der Zugang zum Kassenbüro während des Umgangs mit Bargeld stets verschlossen ist, um Überfällen vorzubeugen (§ 3 ArbSchG).";
}

if (measure.includes("Werden neue Mitarbeiter vor Aufnahme der Tätigkeit zum Thema Arbeitssicherheit und Brandschutz unterwiesen")) {
  measure = "Führen Sie vor Arbeitsaufnahme eine umfassende Erstunterweisung zur Arbeitssicherheit und zum Brandschutz gemäß § 12 ArbSchG durch und dokumentieren Sie diese.";
}

if (measure.includes("mindestens ein Mitarbeiter mit der Qualifikation zum Ersthelfer")) {
  measure = "Stellen Sie sicher, dass während der gesamten Betriebszeiten mindestens ein ausgebildeter Ersthelfer nach DGUV Vorschrift 1 § 26 anwesend ist.";
}

if (measure.includes("mindestens ein Mitarbeiter mit der Qualifikation als Brandschutzhelfer")) {
  measure = "Sorgen Sie gemäß ASR A2.2 und § 10 ArbSchG dafür, dass jederzeit ein geschulter Brandschutzhelfer vor Ort ist.";
}

if (measure.includes("Sicherheitsbeauftragter ausgebildet und bestellt")) {
  measure = "Bestellen Sie gemäß § 22 SGB VII einen geeigneten Sicherheitsbeauftragten und stellen Sie dessen Schulung und regelmäßige Beteiligung sicher.";
}

if (measure.includes("Wurde die Gefährdungsbeurteilung (GBO) erstellt und ist sie auf dem aktuellen Stand")) {
  measure = "Erstellen und aktualisieren Sie regelmäßig eine schriftliche Gefährdungsbeurteilung gemäß § 5 ArbSchG und § 3 BetrSichV.";
}

if (measure.includes("Wurden Personen, die sich im Bereich von Kühlanlagen oder Kühlhäusern aufhalten, unterwiesen")) {
  measure = "Unterweisen Sie alle Personen, die sich im Bereich von Kühlanlagen aufhalten, zu spezifischen Gefährdungen und Rettungsmaßnahmen gemäß § 12 ArbSchG.";
}

if (measure.includes("Sind die Sensoren nicht mit Material oder sonstigen Gegenständen verstellt")) {
  measure = "Achten Sie darauf, dass sicherheitsrelevante Sensoren, Melder oder Lüftungselemente nicht verstellt oder blockiert sind (§ 3 ArbSchG, TRBS 1115).";
}

if (measure.includes("Sind alle Sicherheitsvorrichtungen (Alarmleuchten, Kennzeichnungen, Kühlhaustüren) intakt")) {
  measure = "Sorgen Sie dafür, dass alle sicherheitstechnischen Vorrichtungen, wie Alarmleuchten, Kennzeichnungen und Schutzeinrichtungen, stets funktionstüchtig und unbeschädigt sind (§ 4 BetrSichV).";
}
if (measure.includes("Unterweisung von Praktikanten und Schüleraushilfen durchgeführt")) {
  measure = "Führen Sie eine Unterweisung für Praktikanten und Schüleraushilfen vor Beginn der Beschäftigung gemäß § 12 ArbSchG durch und dokumentieren Sie diese schriftlich.";
}

if (measure.includes("Unterweisung schriftlich dokumentiert")) {
  measure = "Dokumentieren Sie alle durchgeführten Unterweisungen rechtskonform und archivieren Sie die Nachweise gemäß § 6 ArbSchG.";
}

if (measure.includes("Personen die Inhalte der Unterweisung verstanden")) {
  measure = "Vergewissern Sie sich, dass unterwiesene Personen die vermittelten Inhalte verstanden haben, etwa durch Rückfragen oder Lernerfolgskontrollen (§ 12 ArbSchG).";
}

// --- Maßnahmen für Abschnitt 11.0 Arbeitsmedizin ---
if (measure.includes("arbeitsmedizinische Vorsorge angeboten")) {
  measure = "Bieten Sie allen Beschäftigten arbeitsmedizinische Vorsorge nach der Verordnung zur arbeitsmedizinischen Vorsorge (ArbMedVV) an und dokumentieren Sie das Angebot.";
}

if (measure.includes("arbeitsmedizinische Betreuung vor Ort stattgefunden")) {
  measure = "Stellen Sie sicher, dass eine regelmäßige arbeitsmedizinische Betreuung vor Ort (z. B. Sprechstunde, Arbeitsplatzbegehung) durch den Betriebsarzt erfolgt.";
}

if (measure.includes("Begehungen durch den Betriebsarzt durchgeführt")) {
  measure = "Organisieren Sie regelmäßige Begehungen des Betriebsarztes gemäß DGUV Vorschrift 2, um arbeitsmedizinische Belange vor Ort zu überprüfen.";
}

if (measure.includes("arbeitsmedizinische Beratungen für Beschäftigte oder Führungskräfte")) {
  measure = "Ermöglichen Sie Beratungen durch den Betriebsarzt für Beschäftigte und Führungskräfte, insbesondere zu gesundheitlichen Fragestellungen und Präventionsmaßnahmen.";
}

if (measure.includes("Zusammenarbeit zwischen Betriebsarzt und Fachkraft für Arbeitssicherheit")) {
  measure = "Verbessern Sie die Zusammenarbeit zwischen Betriebsarzt und Fachkraft für Arbeitssicherheit im Rahmen des Arbeitsschutzausschusses (ASA) nach § 11 ASiG.";
}

if (measure.includes("Maßnahmen gegen Hauterkrankungen getroffen")) {
  measure = "Ergreifen Sie geeignete Schutzmaßnahmen (z. B. Hautschutzmittel, Handschuhe, Schulungen) zur Prävention von Hauterkrankungen gemäß § 3 ArbSchG und TRGS 401.";
}

if (measure.includes("Berichte und Empfehlungen des Betriebsarztes dokumentiert und umgesetzt")) {
  measure = "Dokumentieren Sie die Empfehlungen des Betriebsarztes und setzen Sie diese nachweislich um, um die Wirksamkeit der arbeitsmedizinischen Betreuung sicherzustellen.";
}

if (measure.includes("sanitäre Anlagen und Pausenräume sauber")) {
  measure = "Stellen Sie sicher, dass sanitäre Anlagen und Pausenräume regelmäßig gereinigt, instand gehalten und mit ausreichenden Hygieneartikeln (Seife, Einmalhandtücher, Desinfektionsmittel) ausgestattet werden – gemäß ArbStättV Anhang Nr. 4.1 und ASR A4.1.";
}

if (measure.includes("Wünsche der Beschäftigten bei der Arbeitsplanung berücksichtigt")) {
  measure = "Beziehen Sie individuelle Wünsche der Beschäftigten bei der Arbeitszeitgestaltung ein, soweit dies mit den betrieblichen Erfordernissen vereinbar ist (§ 3 ArbSchG, § 106 GewO).";
}

if (measure.includes("Pausenregelung umgesetzt")) {
  measure = "Stellen Sie sicher, dass die gesetzlichen Pausenregelungen gemäß § 4 ArbZG eingehalten und in der Arbeitszeitplanung berücksichtigt werden.";
}

if (measure.includes("Pausenraum vorhanden")) {
  measure = "Halten Sie einen geeigneten Pausenraum gemäß ArbStättV Anhang Nr. 4.2 bereit, der sauber, beheizbar und mit Sitzmöglichkeiten ausgestattet ist.";
}

if (measure.includes("Überstunden gering gehalten")) {
  measure = "Begrenzen Sie Überstunden auf das notwendige Maß und achten Sie auf die Einhaltung der täglichen und wöchentlichen Höchstarbeitszeiten (§ 3 ArbZG).";
}

if (measure.includes("regelmäßige Teambesprechungen durchgeführt")) {
  measure = "Führen Sie regelmäßige Besprechungen im Team durch, um die Kommunikation und Beteiligung der Beschäftigten gemäß § 81 BetrVG und § 4 ArbSchG zu fördern.";
}

if (measure.includes("neue Mitarbeiter eingearbeitet")) {
  measure = "Stellen Sie sicher, dass neue Beschäftigte systematisch eingearbeitet werden und die für ihre Tätigkeit erforderlichen Kenntnisse vermittelt bekommen (§ 3 ArbSchG).";
}

if (measure.includes("Unterweisung zum Thema Brand- und Arbeitsschutz erfolgt")) {
  measure = "Führen Sie regelmäßige Unterweisungen zu Arbeitsschutz und Brandschutz gemäß § 12 ArbSchG und DGUV Information 205-023 durch.";
}

if (measure.includes("schwarzes Brett im Sozialraum oder Kassenbüro")) {
  measure = "Halten Sie ein aktuelles schwarzes Brett im Sozialraum oder Bürobereich zur Information der Beschäftigten bereit (§ 81 BetrVG, § 12 ArbSchG).";
}

if (measure.includes("Entscheidungen transparent erläutert")) {
  measure = "Kommunizieren Sie betriebliche Entscheidungen transparent und nachvollziehbar, um das Vertrauen der Beschäftigten zu stärken (§ 4 ArbSchG, § 81 BetrVG).";
}

if (measure.includes("positive Rückmeldungen bei guter Leistung")) {
  measure = "Geben Sie regelmäßig wertschätzendes Feedback bei guter Leistung, um Motivation und Arbeitszufriedenheit zu fördern (§ 4 ArbSchG, § 75 BetrVG).";
}

if (measure.includes("konstruktive Kritik geübt")) {
  measure = "Führen Sie Kritikgespräche sachlich und lösungsorientiert, unter Wahrung der Würde der betroffenen Person (§ 75 BetrVG, § 4 ArbSchG).";
}

if (measure.includes("Weiterbildungsmöglichkeiten geschaffen")) {
  measure = "Schaffen Sie innerbetriebliche oder externe Weiterbildungsangebote und fördern Sie Qualifizierungen gemäß § 82 BetrVG sowie § 3 ArbSchG.";
}

if (measure.includes("Aushang zur Information über die Suchtprävention")) {
  measure = "Stellen Sie einen gut sichtbaren Aushang mit Informationen zur Suchtprävention bereit und verweisen Sie auf innerbetriebliche Hilfsangebote (§ 3 ArbSchG, BEM-Leitlinien).";
}

if (measure.includes("betriebliches Wiedereingliederungsmanagement implementiert")) {
  measure = "Implementieren Sie ein betriebliches Wiedereingliederungsmanagement (BEM) nach § 167 Abs. 2 SGB IX für länger erkrankte Beschäftigte.";
}

if (measure.includes("Alleinarbeit vermieden")) {
  measure = "Vermeiden Sie gefährdende Alleinarbeit oder ergreifen Sie geeignete Schutzmaßnahmen, wie Notrufsysteme oder Kontrollgänge (§ 3 ArbSchG, DGUV Regel 115-003).";
}

if (measure.includes("Betreuung nach einem Überfall organisiert")) {
  measure = "Stellen Sie sicher, dass betroffene Mitarbeitende nach einem Überfall psychologische Betreuung und Nachsorge erhalten (§ 3 ArbSchG, § 84 SGB IX).";
}

if (measure.includes("Schulungen für den Umgang mit gewalttätigen Situationen ermöglicht")) {
  measure = "Ermöglichen Sie Mitarbeitenden Schulungen zum Deeskalations- und Konfliktmanagement bei Gewaltvorfällen gemäß § 12 ArbSchG und DGUV Information 206-023.";
}
if (measure.includes("Beziehen Sie Mitarbeiteranregungen in die Entscheidungsprozesse mit ein")) {
  measure = "Stellen Sie sicher, dass Anregungen der Mitarbeitenden systematisch in Entscheidungsprozesse einbezogen und bei Maßnahmen des Arbeits- und Gesundheitsschutzes angemessen berücksichtigt werden (§ 3 ArbSchG, § 87 BetrVG).";
}

  if (!measure.endsWith(".")) {
    measure += ".";
  }
  return measure;
}

// Improved function to mark empty rows and only add them when needed
function neinFragenInMaßnahmen() {
  const fragenzeilen = document.querySelectorAll('#fragenTabelle tr');
  const maßnahmenTabelleBody = document.getElementById('maßnahmen-tabelle');
  maßnahmenTabelleBody.innerHTML = '';
  let dynamicMeasuresCount = 0;

  fragenzeilen.forEach(row => {
    const frageText = row.cells[0]?.innerText;
    const radios = row.querySelectorAll('input[type="radio"]');
    let selected = null;
    radios.forEach(r => {
      if (r.checked) selected = r.value;
    });

    if (selected === 'nein' && frageText && !frageText.includes('category-header')) {
      const measureText = generateMeasure(frageText);
      const newRow = document.createElement('tr');
      const numCell = document.createElement('td');
      const frageCell = document.createElement('td');
      const descCell = document.createElement('td');

      numCell.textContent = (dynamicMeasuresCount + 1).toString();
      frageCell.textContent = frageText;
      frageCell.style.fontStyle = 'italic';
      frageCell.style.fontSize = '0.9em';
      descCell.textContent = measureText;
      descCell.contentEditable = "true";

      newRow.appendChild(numCell);
      newRow.appendChild(frageCell);
      newRow.appendChild(descCell);
      maßnahmenTabelleBody.appendChild(newRow);
      dynamicMeasuresCount++;
    }
  });

  // Only add empty rows if there are already measures, and mark them as empty
  if (dynamicMeasuresCount > 0) {
    for (let i = 0; i < 2; i++) {
      const newRow = document.createElement('tr');
      newRow.classList.add('empty-row'); // Mark as empty for PDF hiding
      const numCell = document.createElement('td');
      const frageCell = document.createElement('td');
      const descCell = document.createElement('td');

      numCell.textContent = (dynamicMeasuresCount + i + 1).toString();
      frageCell.textContent = '';
      frageCell.contentEditable = "true";
      descCell.textContent = '';
      descCell.contentEditable = "true";

      newRow.appendChild(numCell);
      newRow.appendChild(frageCell);
      newRow.appendChild(descCell);
      maßnahmenTabelleBody.appendChild(newRow);
    }
  }
}

function exportiereMassnahmen() {
  const maßnahmenTabelleBody = document.getElementById('maßnahmen-tabelle');
  const maßnahmenTabelle = []; 
  const rows = maßnahmenTabelleBody.querySelectorAll('tr');
  rows.forEach((row) => {
    const cells = row.querySelectorAll('td');
    if (cells.length >= 3) {
      const nr = cells[0].textContent.trim();
      const frage = cells[1].textContent.trim();
      const beschreibung = cells[2].textContent.trim();
 
      if (frage || beschreibung) {
        maßnahmenTabelle.push({
          nr: parseInt(nr) || maßnahmenTabelle.length + 1,
          frage: frage,
          beschreibung: beschreibung
        });
      }
    }
  });
  const datum = document.getElementById('datum')?.textContent || '';
  const markt = document.getElementById('markt')?.value || '';
  const name = document.getElementById('name')?.value || '';
  const sifa = document.getElementById('sifa')?.value || '';
  const daten = {
    datum,
    markt,
    name,
    sifa,
    maßnahmen: maßnahmenTabelle
  };
  const newWindow = window.open('massnahmen-sifa.html', 'maßnahmen');
  setTimeout(() => {
    newWindow.postMessage(daten, "*");
  }, 1000);
}
window.addEventListener("resize", resizeCanvas);
window.addEventListener("load", () => {
  resizeCanvas();
  restoreSignature();
  const datumsfeld = document.getElementById('datum');
  if (datumsfeld) {
    const heute = new Date();
    const datumDeutsch = heute.toLocaleDateString("de-DE", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric"
    });
    datumsfeld.textContent = datumDeutsch;
  }

  // Add event listeners to all radio buttons
  const radioButtons = document.querySelectorAll('#fragenTabelle input[type="radio"]');
  radioButtons.forEach(radio => {
    radio.addEventListener('change', neinFragenInMaßnahmen);
  });

  // Initial call to populate measures
  neinFragenInMaßnahmen();
  ladeFormular();
});
canvas.addEventListener('mousedown', startDrawing);
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('mouseup', stopDrawing);
canvas.addEventListener('mouseout', stopDrawing);
canvas.addEventListener('touchstart', startDrawing, { passive: false });
canvas.addEventListener('touchmove', draw, { passive: false });
canvas.addEventListener('touchend', stopDrawing);
// Service Worker optional
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sicher/sw.js')
      .then(() => console.log("✅ Service Worker registriert"))
      .catch(err => console.error("❌ Service Worker Fehler:", err));
  });
}

function manuellSpeichern() {
  const formData = {
    markt: document.getElementById('markt')?.value || '',
    name: document.getElementById('name')?.value || '',
    sifa: document.getElementById('sifa')?.value || '',
    datum: document.getElementById('datum')?.textContent || '',
    antworten: {},
    checkboxes: {
      mangel: document.getElementById('mangel')?.checked || false,
      massnahmen: document.getElementById('massnahmen')?.checked || false,
      nachkontrolle: document.getElementById('nachkontrolle')?.checked || false,
      mitarbeiter: document.getElementById('mitarbeiter')?.checked || false
    },
    unterschrift: canvas.toDataURL()
  };

  const radios = document.querySelectorAll('#fragenTabelle input[type="radio"]:checked');
  radios.forEach(radio => {
    formData.antworten[radio.name] = radio.value;
  });

  localStorage.setItem('arbeitssicherheit_formular', JSON.stringify(formData));
  alert('✅ Formular wurde gespeichert!');
}

function ladeFormular() {
  const gespeichert = localStorage.getItem('arbeitssicherheit_formular');
  if (!gespeichert) return;

  try {
    const formData = JSON.parse(gespeichert);
    
    if (formData.markt) document.getElementById('markt').value = formData.markt;
    if (formData.name) document.getElementById('name').value = formData.name;
    if (formData.sifa) document.getElementById('sifa').value = formData.sifa;

    Object.keys(formData.antworten).forEach(name => {
      const value = formData.antworten[name];
      const radio = document.querySelector(`input[name="${name}"][value="${value}"]`);
      if (radio) radio.checked = true;
    });

    if (formData.checkboxes) {
      if (formData.checkboxes.mangel) document.getElementById('mangel').checked = true;
      if (formData.checkboxes.massnahmen) document.getElementById('massnahmen').checked = true;
      if (formData.checkboxes.nachkontrolle) document.getElementById('nachkontrolle').checked = true;
      if (formData.checkboxes.mitarbeiter) document.getElementById('mitarbeiter').checked = true;
    }

    if (formData.unterschrift) {
      const img = new Image();
      img.onload = () => {
        ctx.drawImage(img, 0, 0, canvas.offsetWidth, canvas.offsetHeight);
      };
      img.src = formData.unterschrift;
    }

    neinFragenInMaßnahmen();
  } catch (e) {
    console.error('Fehler beim Laden:', e);
  }
}

function formularZuruecksetzen() {
  if (!confirm('Möchten Sie wirklich alle Eingaben zurücksetzen?')) return;
  
  document.getElementById('markt').value = '';
  document.getElementById('name').value = '';
  document.getElementById('sifa').value = '';
  
  const radios = document.querySelectorAll('#fragenTabelle input[type="radio"]');
  radios.forEach(radio => radio.checked = false);
  
  document.getElementById('mangel').checked = false;
  document.getElementById('massnahmen').checked = false;
  document.getElementById('nachkontrolle').checked = false;
  document.getElementById('mitarbeiter').checked = false;

 document.querySelectorAll("tr").forEach(tr => {
    tr.classList.remove("highlight-ja", "highlight-nein", "highlight-nicht");
  });
  
  clearSignature();
  neinFragenInMaßnahmen();
  localStorage.removeItem('arbeitssicherheit_formular');
  
  alert('✅ Formular wurde zurückgesetzt!');
}

// Set title
document.getElementById('titel').textContent = 'Arbeitssicherheit-Checkliste-2025';

// Automatisches Laden beim Start
window.addEventListener('DOMContentLoaded', () => {
  ladeFormular();
});

// Speichern aller Eingaben
function speichereFormular() {
  const formData = {};
  document.querySelectorAll('input').forEach(el => {
    if (el.type === 'radio' || el.type === 'checkbox') {
      if (el.name) {
        if (!formData[el.name]) formData[el.name] = {};
        formData[el.name][el.value] = el.checked;
      } else {
        formData[el.id] = el.checked;
      }
    } else {
      formData[el.id || el.name] = el.value;
    }
  });
  localStorage.setItem('formSicherheit2025', JSON.stringify(formData));
}

// Laden und Anwenden (inkl. Hervorhebung)
function ladeFormular() {
  const saved = localStorage.getItem('formSicherheit2025');
  if (!saved) return;
  const data = JSON.parse(saved);
  
  document.querySelectorAll('input').forEach(el => {
    if (el.type === 'radio' || el.type === 'checkbox') {
      if (el.name && data[el.name]) {
        el.checked = !!data[el.name][el.value];
      } else if (el.id && data[el.id] !== undefined) {
        el.checked = !!data[el.id];
      }
    } else if ((el.id && data[el.id] !== undefined) || (el.name && data[el.name] !== undefined)) {
      el.value = data[el.id || el.name];
    }
  });
  
  // Nach dem Laden: Hervorhebung aktualisieren
  aktualisiereHervorhebung();
}

// Farbige Hervorhebung der Antworten
function aktualisiereHervorhebung() {
  const zeilen = document.querySelectorAll('#fragenTabelle tbody tr');
  zeilen.forEach(row => {
    const radios = row.querySelectorAll('input[type="radio"]');
    if (radios.length) {
      row.classList.remove('highlight-ja', 'highlight-nein', 'highlight-nicht');
      radios.forEach(radio => {
        if (radio.checked) {
          if (radio.value === 'ja') row.classList.add('highlight-ja');
          else if (radio.value === 'nein') row.classList.add('highlight-nein');
          else if (radio.value === 'nicht_vorhanden') row.classList.add('highlight-nicht');
        }
      });
    }
  });
}

// Speichern bei jeder Eingabeänderung
document.addEventListener('change', event => {
  if (event.target.matches('input')) {
    speichereFormular();
    aktualisiereHervorhebung();
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  // Alle Tabellenzeilen holen
  const rows = document.querySelectorAll("#fragenTabelle tbody tr");

  let anzahlFragen = 0;

  rows.forEach(row => {
    // Prüfen, ob diese Zeile mindestens EIN Radio-Input hat
    const radios = row.querySelectorAll("input[type='radio']");
    if (radios.length > 0) {
      anzahlFragen++;
    }
  });

  // Titel aktualisieren
  const titelElement = document.getElementById("titel");
  if (titelElement) {
    titelElement.textContent = `Arbeitssicherheits-Checkliste – ${anzahlFragen} Fragen`;
  }
});
</script>
</body>
</html>
